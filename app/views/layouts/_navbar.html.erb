<nav class="fixed inset-x-0 top-4 z-20">
  <div class="w-full px-4 sm:px-6 lg:px-8">
    <div class="mx-auto flex h-14 max-w-5xl items-center justify-between gap-4 rounded-full border border-[color:var(--glass-border)] bg-[color:var(--glass-bg)] px-4 backdrop-blur-xl shadow-lg">
      
      <!-- Logo links -->
      <div class="flex items-center gap-2">
        <%= link_to root_path do %>
          <div class="flex items-center gap-2">
            <%= image_tag "tally_color_premium.svg", class: "h-8 w-auto", alt: "Tally GO! logo" %>
            <span class="text-sm font-semibold tracking-tight leading-none text-[color:var(--text)]">
              Tally GO! Coffee
            </span>
          </div>
        <% end %>
      </div>

      <!-- Rechts: Desktop-Navigation + Mobile-Burger -->
      <div class="flex items-center gap-4">
        <!-- Desktop-Navigation -->
        <div class="hidden md:flex items-center gap-2">
          <%# Home-Link %>
          <%= link_to "Home",
              root_path,
              class: "rounded-full border px-4 py-2 text-xs font-medium transition " \
                     "#{current_page?(root_path) ? 'bg-[color:var(--glass-strong)] text-[color:var(--text)] border-[color:var(--glass-border-strong)]' : 'border-transparent text-[color:var(--text-muted)] hover:text-[color:var(--text)] hover:bg-[color:var(--glass-weak)]'}" %>

          <%= link_to "Paket hinzufuegen",
              new_logbook_path,
              class: "rounded-full border px-4 py-2 text-xs font-medium transition " \
                     "#{current_page?(new_logbook_path) ? 'bg-[color:var(--glass-strong)] text-[color:var(--text)] border-[color:var(--glass-border-strong)]' : 'border-transparent text-[color:var(--text-muted)] hover:text-[color:var(--text)] hover:bg-[color:var(--glass-weak)]'}" %>

          <%# Stats-Link %>
          <%= link_to "Stats",
              coffee_stats_path,
              class: "rounded-full border px-4 py-2 text-xs font-medium transition " \
                     "#{current_page?(coffee_stats_path) ? 'bg-[color:var(--glass-strong)] text-[color:var(--text)] border-[color:var(--glass-border-strong)]' : 'border-transparent text-[color:var(--text-muted)] hover:text-[color:var(--text)] hover:bg-[color:var(--glass-weak)]'}" %>
        </div>

        <label class="hidden md:flex items-center gap-2 text-[10px] uppercase tracking-[0.2em] text-[color:var(--text-subtle)]">
          <span>Theme</span>
          <input type="checkbox" class="sr-only" data-theme-toggle>
          <span class="relative inline-flex h-7 w-12 items-center rounded-full border border-[color:var(--glass-border)] bg-[color:var(--glass-weak)] p-1">
            <span class="h-5 w-5 rounded-full bg-[color:var(--glass-strong)] shadow-sm transition-transform duration-200" data-theme-knob></span>
          </span>
          <span class="text-[11px] normal-case tracking-normal text-[color:var(--text-muted)]" data-theme-label>Light</span>
        </div>

        <!-- Mobile: Burger-Menü -->
        <div class="flex items-center gap-2 md:hidden">
          <label class="inline-flex items-center">
            <span class="sr-only">Toggle theme</span>
            <input type="checkbox" class="sr-only" data-theme-toggle>
            <span class="relative inline-flex h-7 w-12 items-center rounded-full border border-[color:var(--glass-border)] bg-[color:var(--glass-weak)] p-1">
              <span class="h-5 w-5 rounded-full bg-[color:var(--glass-strong)] shadow-sm transition-transform duration-200" data-theme-knob></span>
            </span>
          </label>
          <button 
            type="button"
            class="inline-flex items-center justify-center rounded-full p-2 text-[color:var(--text-muted)] hover:bg-[color:var(--glass-weak)] focus:outline-none focus:ring-2 focus:ring-[color:var(--accent)]"
            aria-controls="mobile-menu"
            aria-expanded="false"
            onclick="document.getElementById('mobile-menu').classList.toggle('hidden')">
            <span class="sr-only">Menü öffnen</span>
            <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none"
                 viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round"
                    d="M3.75 6.75h16.5M3.75 12h16.5M3.75 17.25h16.5" />
            </svg>
          </button>
        </div>
      </div>

    </div>
  </div>

  <!-- Mobile-Navigation (unter der Navbar) -->
  <div id="mobile-menu" class="md:hidden hidden pt-3">
    <div class="space-y-2 rounded-[var(--radius-md)] border border-[color:var(--glass-border)] bg-[color:var(--glass-bg)] px-4 py-3 backdrop-blur-xl">
      <%= link_to "Home",
          root_path,
          class: "block rounded-full px-3 py-2 text-sm font-medium " \
                 "#{current_page?(root_path) ? 'bg-[color:var(--glass-strong)] text-[color:var(--text)]' : 'text-[color:var(--text-muted)] hover:bg-[color:var(--glass-weak)] hover:text-[color:var(--text)]'}" %>

      <%= link_to "Stats",
          coffee_stats_path,
          class: "block rounded-full px-3 py-2 text-sm font-medium " \
                 "#{current_page?(coffee_stats_path) ? 'bg-[color:var(--glass-strong)] text-[color:var(--text)]' : 'text-[color:var(--text-muted)] hover:bg-[color:var(--glass-weak)] hover:text-[color:var(--text)]'}" %>
    </div>
  </div>
</nav>
