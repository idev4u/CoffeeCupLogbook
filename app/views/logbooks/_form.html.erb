<%= form_with(model: logbook, class: "space-y-6") do |form| %>

  <% if logbook.errors.any? %>
    <div class="rounded-[var(--radius-sm)] border border-[color:var(--error-text)] bg-[color:var(--error-bg)] p-4">
      <div class="flex">
        <div class="flex-shrink-0">
          <svg class="h-5 w-5 text-[color:var(--error-text)]" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 8 0 000 16zm-.75-11.5a.75.75 0 011.5 0v4a.75.75 0 01-1.5 0v-4zm.75 8a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd" />
          </svg>
        </div>
        <div class="ml-3">
          <h3 class="text-sm font-medium text-[color:var(--error-text)]">
            <%= pluralize(logbook.errors.count, "error") %> prohibited this entry from being saved:
          </h3>
          <div class="mt-2 text-sm text-[color:var(--error-text)]">
            <ul class="list-disc space-y-1 pl-5">
              <% logbook.errors.full_messages.each do |message| %>
                <li><%= message %></li>
              <% end %>
            </ul>
          </div>
        </div>
      </div>
    </div>
  <% end %>

  <!-- Type of entry -->
  <div>
    <%= form.label :cup_type, "What are you logging?", class: "block text-xs font-semibold tracking-wide text-[color:var(--text-subtle)] uppercase" %>

    <div class="mt-3 grid grid-cols-1 gap-3 rounded-[var(--radius-md)]">

      <!-- Coffee -->
      <label class="flex items-center justify-between rounded-[var(--radius-md)] border border-[color:var(--glass-border)] bg-[color:var(--glass-weak)] px-4 py-3 shadow-sm backdrop-blur
                    cursor-pointer transition peer-checked:border-[color:var(--accent)] peer-checked:bg-[color:var(--accent-soft)] peer-checked:shadow-md">

        <!-- Peer-Input: muss VOR den Elementen mit peer-checked stehen -->
        <%= form.radio_button :cup_type, "Coffee",
              class: "peer sr-only",
              checked: (logbook.cup_type.blank? || logbook.cup_type == "Coffee") %>

        <!-- Inhalt links -->
        <div class="flex items-center space-x-3">
          <span class="text-xl">‚òï</span>
          <div class="flex flex-col">
            <span class="text-sm font-medium text-[color:var(--text)]">Coffee</span>
            <span class="text-xs text-[color:var(--text-muted)]">Single cup</span>
          </div>
        </div>

        <!-- Fake-Radio rechts -->
        <div class="h-4 w-4 rounded-full border border-[color:var(--border)]
                    peer-checked:border-[color:var(--accent)] peer-checked:bg-[color:var(--accent)]"></div>
      </label>

      <!-- Coffee Package (mit Gr√∂√üe) -->
      <!-- Coffee Package 250g -->
      <label class="flex items-center justify-between rounded-[var(--radius-md)] border border-[color:var(--glass-border)] bg-[color:var(--glass-weak)] px-4 py-3 shadow-sm backdrop-blur
              cursor-pointer transition peer-checked:border-[color:var(--accent)] peer-checked:bg-[color:var(--accent-soft)] peer-checked:shadow-md">
        <%= form.radio_button :cup_type, "Probe Package",
              class: "peer sr-only",
              checked: (logbook.cup_type == "Probe Package") %>
        <div class="flex items-center space-x-3">
          <span class="text-xl">üõçÔ∏è</span>
          <div class="flex flex-col">
            <span class="text-sm font-medium text-[color:var(--text)]">Probe Package</span>
            <span class="text-xs text-[color:var(--text-muted)]">250g package</span>
          </div>
        </div>

        <div class="h-4 w-4 rounded-full border border-[color:var(--border)]
                    peer-checked:border-[color:var(--accent)] peer-checked:bg-[color:var(--accent)]"></div>
        <!-- %= form.hidden_field :package_size_grams, value: 250 % -->
      </label>


      <!-- Coffee Package 500g -->
      <label class="flex items-center justify-between rounded-[var(--radius-md)] border border-[color:var(--glass-border)] bg-[color:var(--glass-weak)] px-4 py-3 shadow-sm backdrop-blur
                    cursor-pointer transition peer-checked:border-[color:var(--accent)] peer-checked:bg-[color:var(--accent-soft)] peer-checked:shadow-md">

        <%= form.radio_button :cup_type, "Plauen Gold Package",
              class: "peer sr-only",
              checked: (logbook.cup_type == "Plauen Gold Package") %>

        <div class="flex items-center space-x-3">
          <span class="text-xl">üì¶</span>
          <div class="flex flex-col">
            <span class="text-sm font-medium text-[color:var(--text)]">Plauen Gold Package</span>
            <span class="text-xs text-[color:var(--text-muted)]">500g package</span>
          </div>
        </div>

        <div class="h-4 w-4 rounded-full border border-[color:var(--border)]
                    peer-checked:border-[color:var(--accent)] peer-checked:bg-[color:var(--accent)]"></div>

        <!-- %= form.hidden_field :package_size_grams, value: 500 % -->
      </label>
    </div>
  </div>

  <!-- Amount -->
  <div>
    <%= form.label :amount, "Amount of Cups", class: "block text-sm font-medium text-[color:var(--text-muted)]" %>
    <div class="mt-1">
      <%= form.select :amount,
            options_for_select((1..10).to_a, logbook.amount || 1),
            {},
            class: "block w-full rounded-[var(--radius-sm)] border border-[color:var(--border)] bg-[color:var(--glass-weak)] text-[color:var(--text)] shadow-sm focus:border-[color:var(--accent)] focus:ring-[color:var(--accent)] sm:text-sm" %>
    </div>
  </div>

  <div class="pt-5">
    <div class="flex justify-end">
      <%= link_to "Cancel", logbooks_path, class: "rounded-[var(--radius-sm)] border border-[color:var(--border)] bg-[color:var(--glass-weak)] px-4 py-2 text-sm font-medium text-[color:var(--text-muted)] shadow-sm transition hover:bg-[color:var(--glass-strong)] hover:text-[color:var(--text)] focus:outline-none focus:ring-2 focus:ring-[color:var(--accent)]" %>
      <%= form.submit "Add Usage", class: "ml-3 inline-flex justify-center rounded-[var(--radius-sm)] border border-transparent bg-[color:var(--accent)] px-4 py-2 text-sm font-medium text-[color:var(--text-on-accent)] shadow-sm transition hover:bg-[color:var(--accent-strong)] focus:outline-none focus:ring-2 focus:ring-[color:var(--accent)]" %>
    </div>
  </div>
<% end %>
