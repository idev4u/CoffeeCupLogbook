<%= form_with(model: logbook, class: "space-y-6") do |form| %>

  <% if logbook.errors.any? %>
    <div class="rounded-[var(--radius-sm)] border border-[color:var(--error-text)] bg-[color:var(--error-bg)] p-4">
      <div class="flex">
        <div class="flex-shrink-0">
          <svg class="h-5 w-5 text-[color:var(--error-text)]" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 8 0 000 16zm-.75-11.5a.75.75 0 011.5 0v4a.75.75 0 01-1.5 0v-4zm.75 8a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd" />
          </svg>
        </div>
        <div class="ml-3">
          <h3 class="text-sm font-medium text-[color:var(--error-text)]">
            <%= pluralize(logbook.errors.count, "error") %> prohibited this entry from being saved:
          </h3>
          <div class="mt-2 text-sm text-[color:var(--error-text)]">
            <ul class="list-disc space-y-1 pl-5">
              <% logbook.errors.full_messages.each do |message| %>
                <li><%= message %></li>
              <% end %>
            </ul>
          </div>
        </div>
      </div>
    </div>
  <% end %>

  <%= form.hidden_field :amount, value: 1 %>

  <div>
    <%= form.label :cup_type, "Paketgröße", class: "block text-xs font-semibold tracking-wide text-[color:var(--text-subtle)] uppercase" %>
    <div class="mt-3 grid grid-cols-1 gap-3">
      <label class="flex items-center justify-between rounded-[var(--radius-md)] border border-[color:var(--glass-border)] bg-[color:var(--glass-weak)] px-4 py-3 shadow-sm backdrop-blur
                    cursor-pointer transition peer-checked:border-[color:var(--accent)] peer-checked:bg-[color:var(--accent-soft)] peer-checked:shadow-md">
        <%= form.radio_button :cup_type, "Plauen Gold Package",
              class: "peer sr-only",
              checked: (logbook.cup_type.blank? || logbook.cup_type == "Plauen Gold Package") %>
        <div class="flex items-center space-x-3">
          <span class="inline-flex h-9 w-9 items-center justify-center rounded-full border border-[color:var(--border-strong)] bg-[color:var(--glass-strong)] text-[color:var(--text)]">
            <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                 fill="none" stroke="currentColor" stroke-width="1.8"
                 stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <path d="M7.5 3.8h9" />
              <path d="M7.5 3.8 8.8 6.2h6.4L16.5 3.8" />
              <path d="M8.2 6.2c-1.0 1.6-1.7 3.4-1.7 5.2v6.1c0 1.5 1.2 2.7 2.7 2.7h5.6c1.5 0 2.7-1.2 2.7-2.7v-6.1c0-1.8-.7-3.6-1.7-5.2" />
              <rect x="8.8" y="11.2" width="6.4" height="6.2" rx="1.2" />
            </svg>
          </span>
          <div class="flex flex-col">
            <span class="text-sm font-medium text-[color:var(--text)]">500g Paket</span>
            <span class="text-xs text-[color:var(--text-muted)]">Plauen Gold</span>
          </div>
        </div>
        <span class="relative flex h-5 w-5 items-center justify-center rounded-full border-[6px] border-[color:var(--border-strong)] box-border transition peer-checked:border-[color:var(--accent)]">
          <span class="h-[4px] w-[4px] rounded-full bg-white opacity-0 scale-50 transition peer-checked:opacity-100 peer-checked:scale-100"></span>
        </span>
      </label>

      <label class="flex items-center justify-between rounded-[var(--radius-md)] border border-[color:var(--glass-border)] bg-[color:var(--glass-weak)] px-4 py-3 shadow-sm backdrop-blur
                    cursor-pointer transition peer-checked:border-[color:var(--accent)] peer-checked:bg-[color:var(--accent-soft)] peer-checked:shadow-md">
        <%= form.radio_button :cup_type, "Probe Package",
              class: "peer sr-only",
              checked: (logbook.cup_type == "Probe Package") %>
        <div class="flex items-center space-x-3">
          <span class="inline-flex h-9 w-9 items-center justify-center rounded-full border border-[color:var(--border-strong)] bg-[color:var(--glass-strong)] text-[color:var(--text)]">
            <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                 fill="none" stroke="currentColor" stroke-width="1.8"
                 stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <path d="M7.5 3.8h9" />
              <path d="M7.5 3.8 8.8 6.2h6.4L16.5 3.8" />
              <path d="M8.2 6.2c-1.0 1.6-1.7 3.4-1.7 5.2v6.1c0 1.5 1.2 2.7 2.7 2.7h5.6c1.5 0 2.7-1.2 2.7-2.7v-6.1c0-1.8-.7-3.6-1.7-5.2" />
              <rect x="8.8" y="11.2" width="6.4" height="6.2" rx="1.2" />
            </svg>
          </span>
          <div class="flex flex-col">
            <span class="text-sm font-medium text-[color:var(--text)]">250g Paket</span>
            <span class="text-xs text-[color:var(--text-muted)]">Probe Paket</span>
          </div>
        </div>
        <span class="relative flex h-5 w-5 items-center justify-center rounded-full border-[6px] border-[color:var(--border-strong)] box-border transition peer-checked:border-[color:var(--accent)]">
          <span class="h-[4px] w-[4px] rounded-full bg-white opacity-0 scale-50 transition peer-checked:opacity-100 peer-checked:scale-100"></span>
        </span>
      </label>
    </div>
  </div>

  <div>
    <div class="flex flex-col gap-3 rounded-[var(--radius-md)] border border-[color:var(--glass-border)] bg-[color:var(--glass-weak)] px-4 py-4 shadow-sm backdrop-blur sm:flex-row sm:items-center sm:justify-between">
      <div>
        <p class="text-sm font-semibold text-[color:var(--text)]">Rückwirkend erfassen</p>
        <p class="text-xs text-[color:var(--text-muted)]">Falls ihr es erst spaeter bemerkt.</p>
      </div>
      <label class="flex items-center gap-2 text-[10px] uppercase tracking-[0.2em] text-[color:var(--text-subtle)]">
        <span>Datum</span>
        <input type="checkbox" class="sr-only" data-retro-toggle name="logbook[retroactive]" value="1">
        <span class="retro-switch relative inline-flex h-7 w-12 items-center rounded-full border p-1" data-retro-switch>
          <span class="retro-knob h-5 w-5 rounded-full bg-[color:var(--text-inverse)] shadow-sm transition-transform duration-200" data-retro-knob></span>
        </span>
        <span class="text-[11px] normal-case tracking-normal text-[color:var(--text-muted)]" data-retro-label>Aus</span>
      </label>
    </div>
    <div class="mt-3 hidden items-center gap-3 text-sm text-[color:var(--text-muted)]" data-retro-field>
      <label for="logbook_opened_on" class="text-xs font-semibold uppercase tracking-[0.2em] text-[color:var(--text-subtle)]">Datum</label>
      <%= date_field_tag "logbook[opened_on]",
            Date.current,
            id: "logbook_opened_on",
            max: Date.current,
            class: "rounded-[10px] border border-[color:var(--border)] bg-[color:var(--glass-weak)] px-3 py-2 text-sm text-[color:var(--text)]" %>
      <span class="text-xs text-[color:var(--text-subtle)]">Uhrzeit wird auf 09:00 gesetzt.</span>
    </div>
  </div>

  <div class="pt-2">
    <%= form.submit "Paket öffnen", class: "inline-flex w-full justify-center rounded-full border border-transparent bg-[color:var(--accent)] px-6 py-3 text-sm font-semibold text-[color:var(--text-on-accent)] shadow-sm transition hover:bg-[color:var(--accent-strong)] focus:outline-none focus:ring-2 focus:ring-[color:var(--accent)]" %>
  </div>
<% end %>
