<div class="home-layout mx-auto flex max-w-xl flex-col gap-6 pb-24">
  <section class="home-card rounded-[var(--radius-sm)] border border-[color:var(--glass-border)] bg-[color:var(--glass-bg)] shadow-lg backdrop-blur-xl">
    <div class="px-6 py-6">
      <p class="text-[10px] font-semibold uppercase tracking-[0.28em] text-[color:var(--text-subtle)]">
        Heute: <%= Time.zone.today.strftime("%-d. %B") %>
      </p>
      <div class="mt-3">
        <div class="relative">
          <div class="home-count text-5xl font-semibold tracking-tight text-[color:var(--text)] sm:text-6xl">
            <span id="coffee_sum"><%= @today_cups %></span>
          </div>
        </div>
        <p class="mt-2 text-sm text-[color:var(--text-muted)]">
          Schon <span id="coffee_sum_inline"><%= @today_cups %></span> Tassen Kaffee
        </p>
      </div>
      <div class="home-trend mt-3 flex flex-wrap gap-2">
        <div class="home-trend-chip inline-flex items-center gap-2 rounded-full border border-[color:var(--glass-border)] bg-[color:var(--glass-weak)] px-3 py-1.5 text-xs font-medium text-[color:var(--text-muted)]">
          <span class="inline-flex h-5 w-5 items-center justify-center rounded-full bg-[color:var(--accent-soft)] text-[color:var(--text)]">
            <svg class="h-3 w-3" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <path d="M12 20V6" />
              <path d="M7 11l5-5 5 5" />
            </svg>
          </span>
          Gestern: <%= @yesterday_cups %> Tassen
        </div>
        <div class="home-trend-chip inline-flex items-center gap-2 rounded-full border border-[color:var(--glass-border)] bg-[color:var(--glass-weak)] px-3 py-1.5 text-xs font-medium text-[color:var(--text-muted)]">
          <span class="inline-flex h-5 w-5 items-center justify-center rounded-full bg-[color:var(--accent-soft)] text-[color:var(--text)]">
            <svg class="h-3 w-3" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <path d="M8 6h8l-1.2 3H9.2L8 6z" />
              <rect x="7" y="9" width="10" height="10" rx="1.6" />
            </svg>
          </span>
          <% if @last_package_at %>
            Letztes Paket: <%= @last_package_at.to_date.strftime("%-d. %B") %>
          <% else %>
            Letztes Paket: Noch kein Paket erfasst
          <% end %>
        </div>
      </div>
    </div>
  </section>

  <section class="home-card home-action rounded-[var(--radius-sm)] border border-[color:var(--glass-border)] bg-[color:var(--glass-bg)] shadow-lg backdrop-blur-xl">
    <div class="flex flex-col items-center gap-4 px-6 py-6 text-center">
      <div class="relative flex w-full justify-center">
        <div id="coffee_burst" class="home-burst pointer-events-none absolute right-10 top-0 -translate-y-3"></div>
        <%= button_to logbooks_path,
              method: :post,
              params: { logbook: { cup_type: "Coffee", amount: 1 }, quick_add: "1" },
              form: { data: { turbo: true }, class: "w-full flex justify-center" },
              class: "home-cta inline-flex min-h-[64px] w-full max-w-md items-center justify-center rounded-full bg-gradient-to-b from-[color:var(--accent)] to-[color:var(--accent-strong)] px-6 py-5 text-lg font-semibold text-[color:var(--text-on-accent)] shadow-lg transition hover:shadow-xl active:scale-[0.98] focus:outline-none focus:ring-2 focus:ring-[color:var(--accent)] focus:ring-offset-2 ring-offset-[color:var(--glass-weak)]",
              aria: { label: "Kaffee hinzufuegen" } do %>
          <span class="inline-flex items-end gap-2">
            <svg class="h-[1.18em] w-[1.18em] text-[color:var(--text-on-accent)]" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" fill="currentColor" aria-hidden="true">
              <path d="M184 48C170.7 48 160 58.7 160 72C160 110.9 183.4 131.4 199.1 145.1L200.2 146.1C216.5 160.4 224 167.9 224 184C224 197.3 234.7 208 248 208C261.3 208 272 197.3 272 184C272 145.1 248.6 124.6 232.9 110.9L231.8 109.9C215.5 95.7 208 88.1 208 72C208 58.7 197.3 48 184 48zM128 256C110.3 256 96 270.3 96 288L96 480C96 533 139 576 192 576L384 576C425.8 576 461.4 549.3 474.5 512L480 512C550.7 512 608 454.7 608 384C608 313.3 550.7 256 480 256L128 256zM480 448L480 320C515.3 320 544 348.7 544 384C544 419.3 515.3 448 480 448zM320 72C320 58.7 309.3 48 296 48C282.7 48 272 58.7 272 72C272 110.9 295.4 131.4 311.1 145.1L312.2 146.1C328.5 160.4 336 167.9 336 184C336 197.3 346.7 208 360 208C373.3 208 384 197.3 384 184C384 145.1 360.6 124.6 344.9 110.9L343.8 109.9C327.5 95.7 320 88.1 320 72z"/>
            </svg>
            <span class="leading-none">+1 Kaffee</span>
          </span>
        <% end %>
      </div>
      <p class="text-xs text-[color:var(--text-subtle)]">Ein Tap zaehlt eine weitere Tasse.</p>
    </div>
  </section>
</div>

<%= link_to "Paket Ã¶ffnen",
      new_logbook_path,
      class: "home-floating-package fixed bottom-6 left-1/2 z-30 -translate-x-1/2 rounded-full bg-gradient-to-b from-[color:var(--accent)] to-[color:var(--accent-strong)] px-5 py-3 text-sm font-semibold text-[color:var(--text-on-accent)] shadow-lg transition hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-[color:var(--accent)] focus:ring-offset-2 ring-offset-[color:var(--glass-weak)] md:hidden" %>
